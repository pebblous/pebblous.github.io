<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오늘의 달 (Daily DAL) - Data Art Lab | Pebblous Blog</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="매일 새로운 Data Art Lab 작품을 만나보세요. 오늘의 달(DAL)에서 데이터 아트의 아름다움을 경험하세요.">
    <meta name="keywords" content="Data Art Lab, DAL, 데이터 아트, 오늘의 달, Pebblous, 데이터 시각화">
    <meta name="author" content="Pebblous">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://blog.pebblous.ai/dal.html">
    <meta property="og:title" content="오늘의 달 (Daily DAL) - Data Art Lab">
    <meta property="og:description" content="매일 새로운 Data Art Lab 작품을 만나보세요">
    <meta property="og:image" content="https://blog.pebblous.ai/image/og-image.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="오늘의 달 (Daily DAL) - Data Art Lab">
    <meta name="twitter:description" content="매일 새로운 Data Art Lab 작품을 만나보세요">
    <meta name="twitter:image" content="https://blog.pebblous.ai/image/og-image.png">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;400;500&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/styles/common-styles.css?v=20251119">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Daily DAL Script -->
    <script src="/scripts/daily-dal.js"></script>
</head>
<body class="min-h-screen bg-white">

    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-24">
        <!-- Hero Section -->
        <div class="max-w-6xl mx-auto text-center mb-24">
            <div style="position: relative; padding: 4rem 0;">
                <!-- Main Title with dramatic styling -->
                <h1 style="
                    font-size: 8rem;
                    font-weight: 200;
                    letter-spacing: 0.5em;
                    color: transparent;
                    background: linear-gradient(135deg, #1e293b 0%, #F86825 50%, #1e293b 100%);
                    -webkit-background-clip: text;
                    background-clip: text;
                    line-height: 1;
                    font-family: 'Noto Serif KR', serif;
                    margin: 0 -0.5em 0 0;
                    padding: 0;
                    text-transform: lowercase;
                ">달</h1>

                <!-- Moon Phase Divider -->
                <div style="
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 1.5rem;
                    margin: 3rem auto;
                    max-width: 600px;
                ">
                    <!-- New Moon -->
                    <div style="
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        border: 1px solid #cbd5e1;
                        background: transparent;
                    "></div>

                    <!-- Waxing Crescent -->
                    <div style="
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        background: linear-gradient(to right, #cbd5e1 50%, transparent 50%);
                        position: relative;
                    "></div>

                    <!-- First Quarter -->
                    <div style="
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        background: linear-gradient(to right, #94a3b8 50%, transparent 50%);
                        border: 1px solid #cbd5e1;
                    "></div>

                    <!-- Waxing Gibbous -->
                    <div style="
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        background: linear-gradient(to right, #64748b 70%, transparent 30%);
                        border: 1px solid #cbd5e1;
                    "></div>

                    <!-- Full Moon (highlighted with orange) -->
                    <div style="
                        width: 16px;
                        height: 16px;
                        border-radius: 50%;
                        background: #F86825;
                        box-shadow: 0 0 12px rgba(248, 104, 37, 0.4);
                    "></div>

                    <!-- Waning Gibbous -->
                    <div style="
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        background: linear-gradient(to left, #64748b 70%, transparent 30%);
                        border: 1px solid #cbd5e1;
                    "></div>

                    <!-- Last Quarter -->
                    <div style="
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        background: linear-gradient(to left, #94a3b8 50%, transparent 50%);
                        border: 1px solid #cbd5e1;
                    "></div>

                    <!-- Waning Crescent -->
                    <div style="
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        background: linear-gradient(to left, #cbd5e1 50%, transparent 50%);
                    "></div>

                    <!-- Back to New Moon -->
                    <div style="
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        border: 1px solid #cbd5e1;
                        background: transparent;
                    "></div>
                </div>

                <!-- Subtitle with vertical rhythm -->
                <div style="margin-top: 3rem;">
                    <p style="
                        font-size: 0.75rem;
                        font-weight: 400;
                        letter-spacing: 0.4em;
                        color: #F86825;
                        text-transform: uppercase;
                        margin-bottom: 1.5rem;
                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
                    ">Data Art Lab</p>

                    <div style="
                        width: 2px;
                        height: 40px;
                        background: linear-gradient(to bottom, #F86825, transparent);
                        margin: 0 auto 1.5rem;
                    "></div>

                    <p style="
                        font-size: 0.8rem;
                        font-weight: 300;
                        letter-spacing: 0.2em;
                        color: #94a3b8;
                        font-family: 'Noto Serif KR', serif;
                    ">페블러스 데이터 아트랩 갤러리</p>

                    <!-- Scroll Down Indicator -->
                    <div style="
                        margin-top: 3rem;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        gap: 0.5rem;
                        animation: float 3s ease-in-out infinite;
                    ">
                        <svg width="24" height="36" viewBox="0 0 24 36" style="opacity: 0.3;">
                            <path d="M12 2 L12 22" stroke="#F86825" stroke-width="1.5" stroke-linecap="round"/>
                            <path d="M6 16 L12 22 L18 16" stroke="#F86825" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                        </svg>
                        <svg width="24" height="36" viewBox="0 0 24 36" style="opacity: 0.5; margin-top: -20px;">
                            <path d="M12 2 L12 22" stroke="#F86825" stroke-width="1.5" stroke-linecap="round"/>
                            <path d="M6 16 L12 22 L18 16" stroke="#F86825" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                        </svg>
                        <svg width="24" height="36" viewBox="0 0 24 36" style="opacity: 0.7; margin-top: -20px;">
                            <path d="M12 2 L12 22" stroke="#F86825" stroke-width="1.5" stroke-linecap="round"/>
                            <path d="M6 16 L12 22 L18 16" stroke="#F86825" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                        </svg>
                    </div>
                </div>

                <!-- CSS Animation -->
                <style>
                    @keyframes float {
                        0%, 100% {
                            transform: translateY(0);
                        }
                        50% {
                            transform: translateY(10px);
                        }
                    }
                </style>
            </div>
        </div>

        <!-- Artwork Grid -->
        <div class="max-w-7xl mx-auto">
            <div id="artwork-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 lg:gap-8">
                <!-- Artworks will be loaded here dynamically -->
            </div>

            <!-- Loading State -->
            <div id="loading" class="flex justify-center items-center py-20">
                <div class="loading"></div>
            </div>
        </div>
    </main>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <!-- Common Utils -->
    <script src="/scripts/common-utils.js"></script>

    <!-- Load Artworks -->
    <script>
        // Load all DAL artworks for browsing
        async function loadAllArtworks() {
            const grid = document.getElementById('artwork-grid');
            const loading = document.getElementById('loading');

            try {
                const response = await fetch('/articles.json', { cache: 'no-store' });
                const data = await response.json();
                const artworks = data.articles.filter(a => a.published && a.category === 'art');

                if (artworks.length === 0) {
                    grid.innerHTML = '<div class="col-span-full text-center"><p style="color: #64748b;">아직 작품이 없습니다.</p></div>';
                    loading.style.display = 'none';
                    return;
                }

                // Create artwork cards using blog main style
                grid.innerHTML = artworks.map((artwork, index) => {
                    const isExternal = artwork.external || false;

                    // Use cardImage if available, fallback to image
                    let imageUrl = artwork.cardImage || artwork.image || '';
                    if (imageUrl && !imageUrl.startsWith('http')) {
                        imageUrl = imageUrl.startsWith('/')
                            ? `https://blog.pebblous.ai${imageUrl}`
                            : `https://blog.pebblous.ai/${imageUrl}`;
                    }

                    // Fix path - ensure it starts with /
                    let artworkPath = artwork.path;
                    if (!artworkPath.startsWith('/') && !artworkPath.startsWith('http')) {
                        artworkPath = '/' + artworkPath;
                    }

                    // Image tag with fallback to Pebblous logo
                    const imageTag = imageUrl
                        ? `<div class="relative w-full h-48 overflow-hidden bg-slate-100 group/img">
                            <img src="${imageUrl}" alt="${artwork.title}"
                                 class="w-full h-48 object-cover"
                                 loading="lazy">
                           </div>`
                        : `<div class="relative w-full h-48 overflow-hidden bg-slate-100 flex items-end justify-end p-4">
                            <img src="https://pebblous.github.io/image/Pebblous_BM_Orange_RGB.png" alt="Pebblous Logo"
                                 class="default-logo"
                                 style="transform-origin: right bottom; width: 120px;"
                                 loading="lazy">
                           </div>`;

                    // Tags HTML
                    const tagsHtml = artwork.tags && artwork.tags.length > 0
                        ? `<div class="tags-container mb-3">
                            <div class="tags-scroll">
                                ${artwork.tags.slice(0, 5).map(tag => `<span class="tag">${tag}</span>`).join('')}
                            </div>
                           </div>`
                        : '';

                    // Animation delay
                    const animationDelay = `style="animation-delay: ${index * 0.1}s; background: white; border: 1px solid #e2e8f0;"`;

                    return `
                        <a href="${artworkPath}"
                           ${isExternal ? 'target="_blank" rel="noopener noreferrer"' : ''}
                           class="rounded-lg overflow-hidden group flex flex-col fade-in shadow-sm hover:shadow-md transition-shadow"
                           ${animationDelay}>
                            ${imageTag}
                            <div class="p-6 flex-grow">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-xs text-slate-500">${artwork.date || ''}</span>
                                </div>
                                ${tagsHtml}
                                <h3 class="text-xl font-bold transition-colors" style="color: #1e293b;">${artwork.title}</h3>
                                <p class="mt-2 text-sm" style="color: #64748b;">${artwork.description}</p>
                            </div>
                        </a>
                    `;
                }).join('');

                loading.style.display = 'none';

                // Initialize fade-in animation
                const cards = grid.querySelectorAll('.fade-in');
                const fadeInObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting && !entry.target.classList.contains('visible')) {
                            entry.target.classList.add('visible');
                            fadeInObserver.unobserve(entry.target);
                        }
                    });
                }, {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                });

                cards.forEach(card => {
                    fadeInObserver.observe(card);
                });

            } catch (error) {
                console.error('Failed to load artworks:', error);
                grid.innerHTML = '<div class="col-span-full text-center"><p style="color: #64748b;">작품을 불러오는데 실패했습니다.</p></div>';
                loading.style.display = 'none';
            }
        }

        // Load artworks when page loads
        window.addEventListener('DOMContentLoaded', loadAllArtworks);
    </script>
</body>
</html>
